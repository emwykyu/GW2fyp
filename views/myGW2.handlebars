<!DOCTYPE html>
<meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport'
      xmlns="http://www.w3.org/1999/html"/>

<html lang="en">
{{#if user}}
    <head>
    </head>
    <body>
    <div class="ApiHome">

        <h1 class = "apiTitle"> My GW2</h1>

        <div class="row apiTabs">
            <ul class="tabs" data-tabs id="example-tabs">
                <li class="tabs-title is-active"><a href="#panel1" aria-selected="true">Account</a></li>
                <li class="tabs-title"><a href="#panel2">Character</a></li>
            </ul>

            <div class="flipContainer" data-tabs-content="example-tabs">


                <div class="tabs-panel is-active" id="panel1">
                    <div class="row apiRow">
                        <div class="large-3 columns">
                            <div class="row">
                                <ul>
                                    <div class="wow fadeInUp large-12 medium-12 small-12 columns card" data-wow-duration="1s" data-wow-delay="0.1s">
                                        <p class="cardText" id="name"></p>
                                    </div>
                                    <div class="wow fadeInUp large-12 medium-12 small-12 columns card" data-wow-duration="1s" data-wow-delay="0.3s">
                                        <p class="cardText" id="created"></p>
                                    </div>
                                    <div class="wow fadeInUp large-12 medium-12 small-12 columns card" data-wow-duration="1s" data-wow-delay="0.4s">
                                        <p class="cardText" id="accessType"></p>
                                    </div>
                                    <div class="wow fadeInUp large-12 medium-12 small-12 columns card" data-wow-duration="1s" data-wow-delay="0.5s">
                                        <p class="cardText" id="commander"></p>
                                    </div>
                                    <div class="wow fadeInUp large-12 medium-12 small-12 columns card" data-wow-duration="1s" data-wow-delay="0.6s">
                                        <p class="cardText" id="fractalLevel"></p>
                                    </div>
                                    <div class="wow fadeInUp large-12 medium-12 small-12 columns card" data-wow-duration="1s" data-wow-delay="0.7s">
                                        <p class="cardText" id="wvwrank"></p>
                                    </div>
                                    <div></div>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="tabs-panel" id="panel2">
                    <div class="button" onclick="incadd()"></div>
                    <div class="row apiRow">
                        <div class="large-3 columns">
                            <div class="row">
                                <ul>
                                    <div class="wow fadeInUp large-12 medium-12 small-12 columns card" data-wow-duration="1s" data-wow-delay="0.1s">
                                        <p class="cardText" id="apiName"></p>
                                    </div>
                                    <div class="wow fadeInUp large-12 medium-12 small-12 columns card" data-wow-duration="1s" data-wow-delay="0.2s">
                                        <p class="cardText" id="apiGen"></p>
                                    </div>
                                    <div class="wow fadeInUp large-12 medium-12 small-12 columns card" data-wow-duration="1s" data-wow-delay="0.3s">
                                        <p class="cardText" id="apiRace"></p>
                                    </div>
                                    <div class="wow fadeInUp large-12 medium-12 small-12 columns card" data-wow-duration="1s" data-wow-delay="0.4s">
                                        <p class="cardText" id="apiProf"></p>
                                    </div>
                                    <div class="wow fadeInUp large-12 medium-12 small-12 columns card" data-wow-duration="1s" data-wow-delay="0.5s">
                                        <p class="cardText" id="apiLev"></p>
                                    </div>
                                    <div class="wow fadeInUp large-12 medium-12 small-12 columns card" data-wow-duration="1s" data-wow-delay="0.6s">
                                        <p class="cardText" id="apiAge"></p>
                                    </div>
                                    <div class="wow fadeInUp large-12 medium-12 small-12 columns card" data-wow-duration="1s" data-wow-delay="0.7s">
                                        <p class="cardText" id="apiCreate"></p>
                                    </div>
                                    <div class="wow fadeInUp large-12 medium-12 small-12 columns card" data-wow-duration="1s" data-wow-delay="0.8s">
                                        <p class="cardText" id="apiDeath"></p>
                                    </div>
                                    <div></div>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="button" onclick="incsub()"></div>
                </div>


                <!--<div class="orbit" role="region" aria-label="Favorite Space Pictures" data-orbit>-->
                <!--<ul class="orbit-container">-->
                <!--<li class="orbit-slide is-active">-->
                <!--<img class="orbit-image" src="assets/img/orbit/01.jpg" alt="Space">-->
                <!--<figcaption class="orbit-caption">Space, the final frontier.</figcaption>-->
                <!--</li>-->
                <!--<li class="orbit-slide">-->
                <!--<img class="orbit-image" src="assets/img/orbit/01.jpg" alt="Space">-->
                <!--<figcaption class="orbit-caption">Space, the final frontier.</figcaption>-->
                <!--</li>-->
                <!--</ul>-->

                <!--<button class="orbit-previous"><span class="show-for-sr">Previous Slide</span> &#9664;&#xFE0E;</button>-->
                <!--<button class="orbit-next"><span class="show-for-sr">Next Slide</span> &#9654;&#xFE0E;</button>-->

                <!--<nav class="orbit-bullets">-->
                <!--<button class="is-active" data-slide="0"><span class="show-for-sr">First slide details.</span><span class="show-for-sr">Current Slide</span></button>-->
                <!--<button data-slide="1"><span class="show-for-sr">Second slide details.</span></button>-->
                <!--<button data-slide="2"><span class="show-for-sr">Third slide details.</span></button>-->
                <!--<button data-slide="3"><span class="show-for-sr">Fourth slide details.</span></button>-->
                <!--</nav>-->
                <!--</div>-->




            </div>
            <script>
                var inc =0;

                function incadd(){
                    inc = inc + 1;
                    $('#thisdiv').load(document.URL +  'tabs-panel');
                }

                function incsub(){
                    inc = inc - 1;
                    $('#thisdiv').load(document.URL +  'tabs-panel');
                }

                var ep = gw2Api.endpoints.characters.url, params = ep.getParameters();
                params.lang = 'en';     //set language
                params.page = inc;        //set page; in this case, a page refers to a character. page = 0 means all characters
                params.pageSize = 1;    //size of page determines how many pages (i.e. characters) show up.
                params.token = '{{user.apiKey}}'; //API key
                ep.get(params).then(function(response){
                    var data, headers;
                    data = response.data;
                    headers = response.headers;

//        console.log(data);

                    var string = data[0].created;
                    var length = 10;
                    var trimmedString = string.substring(0, length);

                    document.getElementById('apiName').innerHTML = data[0].name;
                    document.getElementById('apiGen').innerHTML =  data[0].gender;
                    document.getElementById('apiRace').innerHTML = data[0].race;
                    document.getElementById('apiProf').innerHTML = data[0].profession;
                    document.getElementById('apiLev').innerHTML =  "level " + data[0].level;
                    document.getElementById('apiAge').innerHTML = parseInt((data[0].age/3600), 10) + " hours played";
                    document.getElementById('apiCreate').innerHTML = "born " + trimmedString;
                    document.getElementById('apiDeath').innerHTML =  "fainted " + data[0].deaths + " times";

                    $('apiOut').jPut({
                        ajax_url:ep,//ajax:Specifies the URL to send the request to. Default is the current page

                        done:function(e){
                            //on success (e will be the json data)
                        },
                        error:function(msg){
                            alert('Error Message:'+msg);    //On error
                        }
                    });

                });


                var epS = gw2Api.endpoints.account.url,
                        paramsS = epS.getParameters();
                params.lang = 'en';
                params.page = 1;
                params.pageSize = 0;
                params.token = '{{user.apiKey}}';
                epS.get(params).then(function(response){
                    var data, headers;
                    data = response.data;
                    headers = response.headers;

//        console.log(data);

                    var string = data.created;
                    var length = 10;
                    var trimmedString = string.substring(0, length);

                    document.getElementById('name').innerHTML = data.name;
                    document.getElementById('created').innerHTML = "Created: " + trimmedString;
                    document.getElementById('accessType').innerHTML = "Account: " + data.access;
                    document.getElementById('commander').innerHTML =  "commander: " + data.commander;
                    document.getElementById('fractalLevel').innerHTML = "Fractal Level: " + data.fractal_level;
                    document.getElementById('wvwrank').innerHTML = "WvW level: " + data.wvw_rank;
//        document.getElementById('apiDeath').innerHTML =  "fainted " + data[0].deaths + " times";


                });


            </script>


            <script src="/jquery/dist/jquery.min.js"></script>
            <script src="/foundation-sites/dist/foundation.min.js"></script>
            <script src="/js/app.js"></script>
            <script src="/js/scroll.js"></script>
            <script src="/js/wow.js"></script>
            <script>

                $(document).ready(function () {
                    $(document).foundation();
                });

                function flip() {
                    $('.card').toggleClass('flipped');
                }

                $(function () {
                    new WOW().init();
                })
            </script>
    </body>
{{else}}
    <div class="error">
        <h1> please log in</h1>

        <form method="post" action="/users/login" class="login">
            {{#if user}}
                <a href="/users/logout" class="button">Log Out</a>
                <script type="text/javascript" src="http://www.youtube.com/player_api"></script>
                <script type="text/javascript">function toggleButtonPlayer_fhcIB(buttonobj){buttonobj.style.display="none";if(buttonobj.id=="gaf210codes-fhcIB-playbutton"){document.getElementById("gaf210codes-fhcIB-pausebutton").style.display="inline";}else{document.getElementById("gaf210codes-fhcIB-playbutton").style.display="inline";}}/*Youtube player code generated @ http://gaf210.imvustylez.net*/</script>
                <div class="gaf210codes_youtubebox">
                    <iframe width="250" height="250" src="https://www.youtube.com/embed/Q2ze7znnAmo?enablejsapi=1&amp;fs=0&amp;rel=0&amp;showinfo=0&amp;modestbranding=1&amp;iv_load_policy=3&amp;controls=0&amp;autoplay=1&amp;loop=1&amp;playlist=Q2ze7znnAmo" onload="gaf210codes_fhcIB=new YT.Player(this)"></iframe>
                </div>
                <button type="button" class="playerbutton button" id="gaf210codes-fhcIB-playbutton" onclick="gaf210codes_fhcIB.playVideo();toggleButtonPlayer_fhcIB(this)" style="display:none">play</button>
                <button type="button" class="playerbutton button" id="gaf210codes-fhcIB-pausebutton" onclick="gaf210codes_fhcIB.pauseVideo();toggleButtonPlayer_fhcIB(this)">pause music</button>
            {{else}}
                <form method="post" action="/users/login" class="login">
                    <div class="form-group">
                        <input type="text" class="loginInput" name="username" placeholder="Username">
                    </div>
                    <div class="form-group">
                        <input type="password" class="loginInput" name="password" placeholder="Password">
                    </div>

                    <button type="submit" class="button">Sign In</button>
                    <a class="button" data-open="exampleModal1">Register</a>
                    <!--<a href="/users/logout" class="button">Log Out</a>-->
                </form>
            {{/if}}
        </form>
    </div>
{{/if}}
</html>
<!--var filterList = ['name', 'race', 'profession', 'level'];-->

<!--for (var key in data[0]) {-->
<!--if (filterList.indexOf(key) > -1) {-->
<!--console.log(data[0][key]);-->
<!--}-->
<!--}-->